{"version":3,"file":"schema-Brc22MYG.js","names":[],"sources":["../src/registry/schema.ts"],"sourcesContent":["import { z } from \"zod\"\n\n// Note: if you edit the schema here, you must also edit the schema in the\n// apps/www/public/schema/registry-item.json file.\n\nexport const registryItemTypeSchema = z.enum([\n  \"registry:lib\",\n  \"registry:block\",\n  \"registry:component\",\n  \"registry:ui\",\n  \"registry:hook\",\n  \"registry:composable\",\n  \"registry:page\",\n  \"registry:file\",\n  \"registry:theme\",\n  \"registry:style\",\n  \"registry:item\",\n\n  // Internal use only\n  \"registry:example\",\n  \"registry:internal\",\n])\n\nexport const registryItemFileSchema = z.discriminatedUnion(\"type\", [\n  // Target is required for registry:file and registry:page\n  z.object({\n    path: z.string(),\n    content: z.string().optional(),\n    type: z.enum([\"registry:file\", \"registry:page\"]),\n    target: z.string(),\n  }),\n  z.object({\n    path: z.string(),\n    content: z.string().optional(),\n    type: registryItemTypeSchema.exclude([\"registry:file\", \"registry:page\"]),\n    target: z.string().optional(),\n  }),\n])\n\nexport const registryItemTailwindSchema = z.object({\n  config: z\n    .object({\n      content: z.array(z.string()).optional(),\n      theme: z.record(z.string(), z.any()).optional(),\n      plugins: z.array(z.string()).optional(),\n    })\n    .optional(),\n})\n\nexport const registryItemCssVarsSchema = z.object({\n  theme: z.record(z.string(), z.string()).optional(),\n  light: z.record(z.string(), z.string()).optional(),\n  dark: z.record(z.string(), z.string()).optional(),\n})\n\nexport const registryItemCssSchema = z.record(\n  z.string(),\n  z.lazy(() =>\n    z.union([\n      z.string(),\n      z.record(\n        z.string(),\n        z.union([z.string(), z.record(z.string(), z.string())]),\n      ),\n    ]),\n  ),\n)\n\nexport const registryItemEnvVarsSchema = z.record(z.string(), z.string())\n\nexport const registryItemSchema = z.object({\n  $schema: z.string().optional(),\n  extends: z.string().optional(),\n  name: z.string(),\n  type: registryItemTypeSchema,\n  title: z.string().optional(),\n  author: z.string().min(2).optional(),\n  description: z.string().optional(),\n  dependencies: z.array(z.string()).optional(),\n  devDependencies: z.array(z.string()).optional(),\n  registryDependencies: z.array(z.string()).optional(),\n  files: z.array(registryItemFileSchema).optional(),\n  tailwind: registryItemTailwindSchema.optional(),\n  cssVars: registryItemCssVarsSchema.optional(),\n  css: registryItemCssSchema.optional(),\n  envVars: registryItemEnvVarsSchema.optional(),\n  meta: z.record(z.string(), z.any()).optional(),\n  docs: z.string().optional(),\n  categories: z.array(z.string()).optional(),\n})\n\nexport type RegistryItem = z.infer<typeof registryItemSchema>\n\nexport const registrySchema = z.object({\n  name: z.string(),\n  homepage: z.string(),\n  items: z.array(registryItemSchema),\n})\n\nexport type Registry = z.infer<typeof registrySchema>\n\nexport const registryIndexSchema = z.array(registryItemSchema)\n\nexport const stylesSchema = z.array(\n  z.object({\n    name: z.string(),\n    label: z.string(),\n  }),\n)\n\nexport const iconsSchema = z.record(\n  z.string(),\n  z.record(z.string(), z.string()),\n)\n\nexport const registryBaseColorSchema = z.object({\n  inlineColors: z.object({\n    light: z.record(z.string(), z.string()),\n    dark: z.record(z.string(), z.string()),\n  }),\n  cssVars: registryItemCssVarsSchema,\n  cssVarsV4: registryItemCssVarsSchema.optional(),\n  inlineColorsTemplate: z.string(),\n  cssVarsTemplate: z.string(),\n})\n\nexport const registryResolvedItemsTreeSchema = registryItemSchema.pick({\n  dependencies: true,\n  devDependencies: true,\n  files: true,\n  tailwind: true,\n  cssVars: true,\n  css: true,\n  envVars: true,\n  docs: true,\n})\n\nexport const registryConfigItemSchema = z.union([\n  // Simple string format: \"https://example.com/{name}.json\"\n  z.string().refine(s => s.includes(\"{name}\"), {\n    message: \"Registry URL must include {name} placeholder\",\n  }),\n  // Advanced object format with auth options\n  z.object({\n    url: z.string().refine(s => s.includes(\"{name}\"), {\n      message: \"Registry URL must include {name} placeholder\",\n    }),\n    params: z.record(z.string(), z.string()).optional(),\n    headers: z.record(z.string(), z.string()).optional(),\n  }),\n])\n\nexport const registryConfigSchema = z.record(\n  z.string().refine(key => key.startsWith(\"@\"), {\n    message: \"Registry names must start with @ (e.g., @v0, @acme)\",\n  }),\n  registryConfigItemSchema,\n)\n\nexport const rawConfigSchema = z\n  .object({\n    $schema: z.string().optional(),\n    style: z.string(),\n    typescript: z.boolean().default(true),\n    tailwind: z.object({\n      config: z.string().optional(),\n      css: z.string(),\n      baseColor: z.string(),\n      cssVariables: z.boolean().default(true),\n      prefix: z.string().default(\"\").optional(),\n    }),\n    iconLibrary: z.string().optional(),\n    aliases: z.object({\n      components: z.string(),\n      utils: z.string(),\n      ui: z.string().optional(),\n      lib: z.string().optional(),\n      hooks: z.string().optional(),\n      composables: z.string().optional(),\n    }),\n    registries: registryConfigSchema.optional(),\n  })\n  .strict()\n\nexport const configSchema = rawConfigSchema.extend({\n  resolvedPaths: z.object({\n    cwd: z.string(),\n    tailwindConfig: z.string(),\n    tailwindCss: z.string(),\n    utils: z.string(),\n    components: z.string(),\n    lib: z.string(),\n    hooks: z.string().optional(),\n    composables: z.string().optional(),\n    ui: z.string(),\n  }),\n})\n\n// TODO: type the key.\n// Okay for now since I don't want a breaking change.\nexport const workspaceConfigSchema = z.record(configSchema)\n\nexport const searchResultItemSchema = z.object({\n  name: z.string(),\n  type: z.string().optional(),\n  description: z.string().optional(),\n  registry: z.string(),\n  addCommandArgument: z.string(),\n})\n\nexport const searchResultsSchema = z.object({\n  pagination: z.object({\n    total: z.number(),\n    offset: z.number(),\n    limit: z.number(),\n    hasMore: z.boolean(),\n  }),\n  items: z.array(searchResultItemSchema),\n})\n\nexport const registriesIndexSchema = z.record(\n  // eslint-disable-next-line regexp/prefer-w, regexp/use-ignore-case\n  z.string().regex(/^@[a-zA-Z0-9][a-zA-Z0-9-_]*$/),\n  z.string(),\n)\n"],"mappings":"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"}