{"version":3,"file":"mcp-9eE0BYQA.js","names":["parts: string[]"],"sources":["../src/mcp/utils.ts","../src/mcp/index.ts"],"sourcesContent":["import type { z } from 'zod'\nimport type { registryItemSchema, searchResultsSchema } from '@/src/schema'\nimport { detectPackageManager } from 'nypm'\nimport { getRegistriesConfig } from '@/src/registry/api'\n\nconst SHADCN_CLI_COMMAND = 'shadcn-vue'\n\nexport async function npxShadcnVue(command: string) {\n  const packageRunner = await detectPackageManager(process.cwd())\n\n  return `${packageRunner?.name} ${SHADCN_CLI_COMMAND} ${command}`\n}\n\nexport async function getMcpConfig(cwd = process.cwd()) {\n  const config = await getRegistriesConfig(cwd)\n\n  return {\n    registries: config.registries,\n  }\n}\n\nexport function formatSearchResultsWithPagination(\n  results: z.infer<typeof searchResultsSchema>,\n  options?: {\n    query?: string\n    registries?: string[]\n  },\n) {\n  const { query, registries } = options || {}\n\n  const formattedItems = results.items.map((item) => {\n    const parts: string[] = [`- ${item.name}`]\n\n    if (item.type) {\n      parts.push(`(${item.type})`)\n    }\n\n    if (item.description) {\n      parts.push(`- ${item.description}`)\n    }\n\n    if (item.registry) {\n      parts.push(`[${item.registry}]`)\n    }\n\n    parts.push(\n      `\\n  Add command: \\`${npxShadcnVue(`add ${item.addCommandArgument}`)}\\``,\n    )\n\n    return parts.join(' ')\n  })\n\n  let header = `Found ${results.pagination.total} items`\n  if (query) {\n    header += ` matching \"${query}\"`\n  }\n  if (registries && registries.length > 0) {\n    header += ` in registries ${registries.join(', ')}`\n  }\n  header += ':'\n\n  const showingRange = `Showing items ${\n    results.pagination.offset + 1\n  }-${Math.min(\n    results.pagination.offset + results.pagination.limit,\n    results.pagination.total,\n  )} of ${results.pagination.total}:`\n\n  let output = `${header}\\n\\n${showingRange}\\n\\n${formattedItems.join('\\n\\n')}`\n\n  if (results.pagination.hasMore) {\n    output += `\\n\\nMore items available. Use offset: ${\n      results.pagination.offset + results.pagination.limit\n    } to see the next page.`\n  }\n\n  return output\n}\n\nexport function formatRegistryItems(\n  items: z.infer<typeof registryItemSchema>[],\n) {\n  return items.map((item) => {\n    const parts: string[] = [\n      `## ${item.name}`,\n      item.description ? `\\n${item.description}\\n` : '',\n      item.type ? `**Type:** ${item.type}` : '',\n      item.files && item.files.length > 0\n        ? `**Files:** ${item.files.length} file(s)`\n        : '',\n      item.dependencies && item.dependencies.length > 0\n        ? `**Dependencies:** ${item.dependencies.join(', ')}`\n        : '',\n      item.devDependencies && item.devDependencies.length > 0\n        ? `**Dev Dependencies:** ${item.devDependencies.join(', ')}`\n        : '',\n    ]\n    return parts.filter(Boolean).join('\\n')\n  })\n}\n\nexport function formatItemExamples(\n  items: z.infer<typeof registryItemSchema>[],\n  query: string,\n) {\n  const sections = items.map((item) => {\n    const parts: string[] = [\n      `## Example: ${item.name}`,\n      item.description ? `\\n${item.description}\\n` : '',\n    ]\n\n    if (item.files?.length) {\n      item.files.forEach((file) => {\n        if (file.content) {\n          parts.push(`### Code (${file.path}):\\n`)\n          parts.push('```tsx')\n          parts.push(file.content)\n          parts.push('```')\n        }\n      })\n    }\n\n    return parts.filter(Boolean).join('\\n')\n  })\n\n  const header = `# Usage Examples\\n\\nFound ${items.length} example${\n    items.length > 1 ? 's' : ''\n  } matching \"${query}\":\\n`\n\n  return header + sections.join('\\n\\n---\\n\\n')\n}\n","import { Server } from '@modelcontextprotocol/sdk/server/index.js'\nimport {\n  CallToolRequestSchema,\n  ListToolsRequestSchema,\n} from '@modelcontextprotocol/sdk/types.js'\nimport dedent from 'dedent'\nimport { z } from 'zod'\nimport { zodToJsonSchema } from 'zod-to-json-schema'\nimport { getRegistryItems, searchRegistries } from '@/src/registry'\nimport { RegistryError } from '@/src/registry/errors'\n\nimport {\n  formatItemExamples,\n  formatRegistryItems,\n  formatSearchResultsWithPagination,\n  getMcpConfig,\n  npxShadcnVue,\n} from './utils'\n\nexport const server = new Server(\n  {\n    name: 'shadcnVue',\n    version: '1.0.0',\n  },\n  {\n    capabilities: {\n      resources: {},\n      tools: {},\n    },\n  },\n)\n\nserver.setRequestHandler(ListToolsRequestSchema, async () => {\n  return {\n    tools: [\n      {\n        name: 'get_project_registries',\n        description:\n          'Get configured registry names from components.json - Returns error if no components.json exists (use init_project to create one)',\n        inputSchema: zodToJsonSchema(z.object({})),\n      },\n      {\n        name: 'list_items_in_registries',\n        description:\n          'List items from registries (requires components.json - use init_project if missing)',\n        inputSchema: zodToJsonSchema(\n          z.object({\n            registries: z\n              .array(z.string())\n              .describe(\n                'Array of registry names to search (e.g., [\\'@shadcn\\', \\'@acme\\'])',\n              ),\n            limit: z\n              .number()\n              .optional()\n              .describe('Maximum number of items to return'),\n            offset: z\n              .number()\n              .optional()\n              .describe('Number of items to skip for pagination'),\n          }),\n        ),\n      },\n      {\n        name: 'search_items_in_registries',\n        description:\n          'Search for components in registries using fuzzy matching (requires components.json). After finding an item, use get_item_examples_from_registries to see usage examples.',\n        inputSchema: zodToJsonSchema(\n          z.object({\n            registries: z\n              .array(z.string())\n              .describe(\n                'Array of registry names to search (e.g., [\\'@shadcn\\', \\'@acme\\'])',\n              ),\n            query: z\n              .string()\n              .describe(\n                'Search query string for fuzzy matching against item names and descriptions',\n              ),\n            limit: z\n              .number()\n              .optional()\n              .describe('Maximum number of items to return'),\n            offset: z\n              .number()\n              .optional()\n              .describe('Number of items to skip for pagination'),\n          }),\n        ),\n      },\n      {\n        name: 'view_items_in_registries',\n        description:\n          'View detailed information about specific registry items including the name, description, type and files content. For usage examples, use get_item_examples_from_registries instead.',\n        inputSchema: zodToJsonSchema(\n          z.object({\n            items: z\n              .array(z.string())\n              .describe(\n                'Array of item names with registry prefix (e.g., [\\'@shadcn/button\\', \\'@shadcn/card\\'])',\n              ),\n          }),\n        ),\n      },\n      {\n        name: 'get_item_examples_from_registries',\n        description:\n          'Find usage examples and demos with their complete code. Search for patterns like \\'accordion-demo\\', \\'button example\\', \\'card-demo\\', etc. Returns full implementation code with dependencies.',\n        inputSchema: zodToJsonSchema(\n          z.object({\n            registries: z\n              .array(z.string())\n              .describe(\n                'Array of registry names to search (e.g., [\\'@shadcn\\', \\'@acme\\'])',\n              ),\n            query: z\n              .string()\n              .describe(\n                'Search query for examples (e.g., \\'accordion-demo\\', \\'button demo\\', \\'card example\\', \\'tooltip-demo\\', \\'example-booking-form\\', \\'example-hero\\'). Common patterns: \\'{item-name}-demo\\', \\'{item-name} example\\', \\'example {item-name}\\'',\n              ),\n          }),\n        ),\n      },\n      {\n        name: 'get_add_command_for_items',\n        description:\n          'Get the shadcn-vue CLI add command for specific items in a registry. This is useful for adding one or more components to your project.',\n        inputSchema: zodToJsonSchema(\n          z.object({\n            items: z\n              .array(z.string())\n              .describe(\n                'Array of items to get the add command for prefixed with the registry name (e.g., [\\'@shadcn/button\\', \\'@shadcn/card\\'])',\n              ),\n          }),\n        ),\n      },\n      {\n        name: 'get_audit_checklist',\n        description:\n          'After creating new components or generating new code files, use this tool for a quick checklist to verify that everything is working as expected. Make sure to run the tool after all required steps have been completed.',\n        inputSchema: zodToJsonSchema(z.object({})),\n      },\n    ],\n  }\n})\n\nserver.setRequestHandler(CallToolRequestSchema, async (request) => {\n  try {\n    if (!request.params.arguments) {\n      throw new Error('No tool arguments provided.')\n    }\n\n    switch (request.params.name) {\n      case 'get_project_registries': {\n        const config = await getMcpConfig(process.cwd())\n\n        if (!config?.registries) {\n          return {\n            content: [\n              {\n                type: 'text',\n                text: dedent`No components.json found or no registries configured.\n\n                To fix this:\n                1. Use the \\`init\\` command to create a components.json file\n                2. Or manually create components.json with a registries section`,\n              },\n            ],\n          }\n        }\n\n        return {\n          content: [\n            {\n              type: 'text',\n              text: dedent`The following registries are configured in the current project:\n\n                ${Object.keys(config.registries)\n                  .map(registry => `- ${registry}`)\n                  .join('\\n')}\n\n                You can view the items in a registry by running:\n                \\`${await npxShadcnVue('view @name-of-registry')}\\`\n\n                For example: \\`${await npxShadcnVue(\n                  'view @shadcn',\n                )}\\` or \\`${await npxShadcnVue(\n                  'view @shadcn @acme',\n                )}\\` to view multiple registries.\n                `,\n            },\n          ],\n        }\n      }\n\n      case 'search_items_in_registries': {\n        const inputSchema = z.object({\n          registries: z.array(z.string()),\n          query: z.string(),\n          limit: z.number().optional(),\n          offset: z.number().optional(),\n        })\n\n        const args = inputSchema.parse(request.params.arguments)\n        const results = await searchRegistries(args.registries, {\n          query: args.query,\n          limit: args.limit,\n          offset: args.offset,\n          config: await getMcpConfig(process.cwd()),\n          useCache: false,\n        })\n\n        if (results.items.length === 0) {\n          return {\n            content: [\n              {\n                type: 'text',\n                text: dedent`No items found matching \"${\n                  args.query\n                }\" in registries ${args.registries.join(\n                  ', ',\n                )}, Try searching with a different query or registry.`,\n              },\n            ],\n          }\n        }\n\n        return {\n          content: [\n            {\n              type: 'text',\n              text: formatSearchResultsWithPagination(results, {\n                query: args.query,\n                registries: args.registries,\n              }),\n            },\n          ],\n        }\n      }\n\n      case 'list_items_in_registries': {\n        const inputSchema = z.object({\n          registries: z.array(z.string()),\n          limit: z.number().optional(),\n          offset: z.number().optional(),\n          cwd: z.string().optional(),\n        })\n\n        const args = inputSchema.parse(request.params.arguments)\n        const results = await searchRegistries(args.registries, {\n          limit: args.limit,\n          offset: args.offset,\n          config: await getMcpConfig(process.cwd()),\n          useCache: false,\n        })\n\n        if (results.items.length === 0) {\n          return {\n            content: [\n              {\n                type: 'text',\n                text: dedent`No items found in registries ${args.registries.join(\n                  ', ',\n                )}.`,\n              },\n            ],\n          }\n        }\n\n        return {\n          content: [\n            {\n              type: 'text',\n              text: formatSearchResultsWithPagination(results, {\n                registries: args.registries,\n              }),\n            },\n          ],\n        }\n      }\n\n      case 'view_items_in_registries': {\n        const inputSchema = z.object({\n          items: z.array(z.string()),\n        })\n\n        const args = inputSchema.parse(request.params.arguments)\n        const registryItems = await getRegistryItems(args.items, {\n          config: await getMcpConfig(process.cwd()),\n          useCache: false,\n        })\n\n        if (registryItems?.length === 0) {\n          return {\n            content: [\n              {\n                type: 'text',\n                text: dedent`No items found for: ${args.items.join(', ')}\n\n                Make sure the item names are correct and include the registry prefix (e.g., @shadcn/button).`,\n              },\n            ],\n          }\n        }\n\n        const formattedItems = formatRegistryItems(registryItems)\n\n        return {\n          content: [\n            {\n              type: 'text',\n              text: dedent`Item Details:\n\n              ${formattedItems.join('\\n\\n---\\n\\n')}`,\n            },\n          ],\n        }\n      }\n\n      case 'get_item_examples_from_registries': {\n        const inputSchema = z.object({\n          query: z.string(),\n          registries: z.array(z.string()),\n        })\n\n        const args = inputSchema.parse(request.params.arguments)\n        const config = await getMcpConfig()\n\n        const results = await searchRegistries(args.registries, {\n          query: args.query,\n          config,\n          useCache: false,\n        })\n\n        if (results.items.length === 0) {\n          return {\n            content: [\n              {\n                type: 'text',\n                text: dedent`No examples found for query \"${args.query}\".\n\n                Try searching with patterns like:\n                - \"accordion-demo\" for accordion examples\n                - \"button demo\" or \"button example\"\n                - Component name followed by \"-demo\" or \"example\"\n\n                You can also:\n                1. Use search_items_in_registries to find all items matching your query\n                2. View the main component with view_items_in_registries for inline usage documentation`,\n              },\n            ],\n          }\n        }\n\n        const itemNames = results.items.map(item => item.addCommandArgument)\n        const fullItems = await getRegistryItems(itemNames, {\n          config,\n          useCache: false,\n        })\n\n        return {\n          content: [\n            {\n              type: 'text',\n              text: formatItemExamples(fullItems, args.query),\n            },\n          ],\n        }\n      }\n\n      case 'get_add_command_for_items': {\n        const args = z\n          .object({\n            items: z.array(z.string()),\n          })\n          .parse(request.params.arguments)\n\n        return {\n          content: [\n            {\n              type: 'text',\n              text: await npxShadcnVue(`add ${args.items.join(' ')}`),\n            },\n          ],\n        }\n      }\n\n      case 'get_audit_checklist': {\n        return {\n          content: [\n            {\n              type: 'text',\n              text: dedent`## Component Audit Checklist\n\n              After adding or generating components, check the following common issues:\n\n              - [ ] Ensure imports are correct i.e named vs default imports\n              - [ ] If using next/image, ensure images.remotePatterns next.config.js is configured correctly.\n              - [ ] Ensure all dependencies are installed.\n              - [ ] Check for linting errors or warnings\n              - [ ] Check for TypeScript errors\n              - [ ] Use the Playwright MCP if available.\n              `,\n            },\n          ],\n        }\n      }\n\n      default:\n        throw new Error(`Tool ${request.params.name} not found`)\n    }\n  }\n  catch (error) {\n    if (error instanceof z.ZodError) {\n      return {\n        content: [\n          {\n            type: 'text',\n            text: dedent`Invalid input parameters:\n              ${error.errors\n                .map(e => `- ${e.path.join('.')}: ${e.message}`)\n                .join('\\n')}\n              `,\n          },\n        ],\n        isError: true,\n      }\n    }\n\n    if (error instanceof RegistryError) {\n      let errorMessage = error.message\n\n      if (error.suggestion) {\n        errorMessage += `\\n\\nðŸ’¡ ${error.suggestion}`\n      }\n\n      if (error.context) {\n        errorMessage += `\\n\\nContext: ${JSON.stringify(error.context, null, 2)}`\n      }\n\n      return {\n        content: [\n          {\n            type: 'text',\n            text: dedent`Error (${error.code}): ${errorMessage}`,\n          },\n        ],\n        isError: true,\n      }\n    }\n\n    const errorMessage = error instanceof Error ? error.message : String(error)\n    return {\n      content: [\n        {\n          type: 'text',\n          text: dedent`Error: ${errorMessage}`,\n        },\n      ],\n      isError: true,\n    }\n  }\n})\n"],"mappings":"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"}